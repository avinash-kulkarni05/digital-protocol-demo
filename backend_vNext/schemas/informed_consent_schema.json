{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "InformedConsentElements",
  "description": "USDM 4.0-compliant schema for informed consent content elements extraction per ICH GCP E6(R2). Covers study overview, procedures, risks, benefits, alternatives, compensation, confidentiality, voluntary participation, and special consents.",
  "type": "object",
  "definitions": {
    "provenance": {
      "type": "object",
      "description": "Source location information for audit trail - populated in Pass 2 only",
      "properties": {
        "section_number": {
          "type": ["string", "null"],
          "description": "Section number from document (e.g., '8.5', '10.2')",
          "maxLength": 50
        },
        "page_number": {
          "type": ["integer", "null"],
          "description": "PDF page number (1-indexed)"
        },
        "text_snippet": {
          "type": ["string", "null"],
          "description": "Direct quote from source (max 500 chars)",
          "maxLength": 500
        }
      }
    },
    "risk_item": {
      "type": "object",
      "properties": {
        "risk_id": {
          "type": "string",
          "description": "Unique risk identifier",
          "maxLength": 50
        },
        "risk_description": {
          "type": "string",
          "description": "Description of the risk",
          "maxLength": 500
        },
        "severity": {
          "type": ["string", "null"],
          "description": "Severity category",
          "enum": ["mild", "moderate", "severe", "life-threatening", null]
        },
        "frequency": {
          "type": ["string", "null"],
          "description": "Frequency category",
          "enum": ["very_common", "common", "uncommon", "rare", "very_rare", null]
        },
        "management": {
          "type": ["string", "null"],
          "description": "How this risk is managed",
          "maxLength": 500
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      },
      "required": ["risk_id", "risk_description"]
    },
    "procedure_item": {
      "type": "object",
      "properties": {
        "procedure_id": {
          "type": "string",
          "maxLength": 50
        },
        "procedure_name": {
          "type": "string",
          "maxLength": 200
        },
        "description": {
          "type": ["string", "null"],
          "maxLength": 500
        },
        "frequency": {
          "type": ["string", "null"],
          "maxLength": 100
        },
        "duration": {
          "type": ["string", "null"],
          "maxLength": 100
        },
        "is_optional": {
          "type": ["boolean", "null"]
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      },
      "required": ["procedure_id", "procedure_name"]
    }
  },
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for this informed consent resource",
      "maxLength": 50
    },
    "instanceType": {
      "type": "string",
      "const": "InformedConsentElements",
      "description": "USDM instance type"
    },
    "name": {
      "type": "string",
      "description": "Name of the informed consent resource",
      "maxLength": 200
    },
    "description": {
      "type": ["string", "null"],
      "description": "Brief description of the ICF content",
      "maxLength": 500
    },
    "study_overview": {
      "type": "object",
      "description": "Study overview for ICF",
      "properties": {
        "study_purpose": {
          "type": ["string", "null"],
          "description": "Purpose of the study for participant understanding",
          "maxLength": 1000
        },
        "study_duration_for_participant": {
          "type": ["string", "null"],
          "description": "How long participant will be in the study",
          "maxLength": 200
        },
        "number_of_visits": {
          "type": ["integer", "null"],
          "description": "Approximate number of study visits"
        },
        "total_time_commitment": {
          "type": ["string", "null"],
          "description": "Total time expected from participant",
          "maxLength": 200
        },
        "number_of_participants": {
          "type": ["string", "null"],
          "description": "Number of participants in the study",
          "maxLength": 100
        },
        "study_locations": {
          "type": ["string", "null"],
          "description": "Where the study is being conducted",
          "maxLength": 300
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "study_procedures": {
      "type": "object",
      "description": "Study procedures for ICF",
      "properties": {
        "screening_procedures": {
          "type": ["array", "null"],
          "items": {
            "$ref": "#/definitions/procedure_item"
          },
          "description": "Procedures during screening period"
        },
        "treatment_procedures": {
          "type": ["array", "null"],
          "items": {
            "$ref": "#/definitions/procedure_item"
          },
          "description": "Procedures during treatment period"
        },
        "follow_up_procedures": {
          "type": ["array", "null"],
          "items": {
            "$ref": "#/definitions/procedure_item"
          },
          "description": "Procedures during follow-up period"
        },
        "optional_procedures": {
          "type": ["array", "null"],
          "items": {
            "$ref": "#/definitions/procedure_item"
          },
          "description": "Optional procedures requiring separate consent"
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "risks": {
      "type": "object",
      "description": "Risks section for ICF",
      "properties": {
        "known_risks": {
          "type": ["array", "null"],
          "items": {
            "$ref": "#/definitions/risk_item"
          },
          "description": "Known risks from study drug or procedures"
        },
        "potential_risks": {
          "type": ["array", "null"],
          "items": {
            "type": "string",
            "maxLength": 300
          },
          "description": "Potential/theoretical risks"
        },
        "reproductive_risks": {
          "type": ["string", "null"],
          "description": "Risks related to pregnancy and reproduction",
          "maxLength": 500
        },
        "unknown_risks_statement": {
          "type": ["string", "null"],
          "description": "Standard statement about unknown risks",
          "maxLength": 300
        },
        "risk_mitigation_measures": {
          "type": ["string", "null"],
          "description": "How risks are minimized",
          "maxLength": 500
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "benefits": {
      "type": "object",
      "description": "Benefits section for ICF",
      "properties": {
        "potential_benefits": {
          "type": ["array", "null"],
          "items": {
            "type": "string",
            "maxLength": 300
          },
          "description": "Potential benefits to participant"
        },
        "no_benefit_statement": {
          "type": ["string", "null"],
          "description": "Standard statement that participant may not benefit",
          "maxLength": 300
        },
        "societal_benefits": {
          "type": ["string", "null"],
          "description": "Benefits to society/future patients",
          "maxLength": 300
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "alternatives": {
      "type": "object",
      "description": "Treatment alternatives for ICF",
      "properties": {
        "alternative_treatments": {
          "type": ["array", "null"],
          "items": {
            "type": "object",
            "properties": {
              "treatment_name": {
                "type": "string",
                "maxLength": 200
              },
              "description": {
                "type": ["string", "null"],
                "maxLength": 300
              }
            },
            "required": ["treatment_name"]
          },
          "description": "Available alternative treatments"
        },
        "no_treatment_option": {
          "type": ["boolean", "null"],
          "description": "Whether no treatment is an option"
        },
        "standard_of_care_description": {
          "type": ["string", "null"],
          "description": "Description of current standard of care",
          "maxLength": 500
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "compensation_costs": {
      "type": "object",
      "description": "Compensation and costs for ICF",
      "properties": {
        "participant_compensation": {
          "type": ["string", "null"],
          "description": "Payment or compensation to participant",
          "maxLength": 300
        },
        "payment_schedule": {
          "type": ["string", "null"],
          "description": "When and how payments are made",
          "maxLength": 200
        },
        "travel_reimbursement": {
          "type": ["string", "null"],
          "description": "Travel expense reimbursement policy",
          "maxLength": 200
        },
        "participant_costs": {
          "type": ["array", "null"],
          "items": {
            "type": "string",
            "maxLength": 200
          },
          "description": "Costs the participant is responsible for"
        },
        "covered_costs": {
          "type": ["array", "null"],
          "items": {
            "type": "string",
            "maxLength": 200
          },
          "description": "Costs covered by sponsor"
        },
        "injury_compensation": {
          "type": ["string", "null"],
          "description": "Compensation for study-related injury",
          "maxLength": 500
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "confidentiality": {
      "type": "object",
      "description": "Confidentiality information for ICF",
      "properties": {
        "data_protection_statement": {
          "type": ["string", "null"],
          "description": "How participant data is protected",
          "maxLength": 500
        },
        "who_has_access": {
          "type": ["array", "null"],
          "items": {
            "type": "string",
            "maxLength": 100
          },
          "description": "Who can access participant data"
        },
        "hipaa_authorization": {
          "type": ["boolean", "null"],
          "description": "Whether HIPAA authorization is required"
        },
        "data_retention_period": {
          "type": ["string", "null"],
          "description": "How long data is retained",
          "maxLength": 100
        },
        "international_data_transfer": {
          "type": ["boolean", "null"],
          "description": "Whether data is transferred internationally"
        },
        "data_sharing": {
          "type": ["string", "null"],
          "description": "Data sharing policies",
          "maxLength": 300
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "voluntary_participation": {
      "type": "object",
      "description": "Voluntary participation for ICF",
      "properties": {
        "voluntary_statement": {
          "type": ["string", "null"],
          "description": "Statement that participation is voluntary",
          "maxLength": 300
        },
        "withdrawal_rights": {
          "type": ["string", "null"],
          "description": "Right to withdraw at any time",
          "maxLength": 300
        },
        "withdrawal_consequences": {
          "type": ["string", "null"],
          "description": "Consequences of withdrawal",
          "maxLength": 500
        },
        "data_after_withdrawal": {
          "type": ["string", "null"],
          "description": "What happens to data after withdrawal",
          "maxLength": 300
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "special_consents": {
      "type": "object",
      "description": "Special consent elements",
      "properties": {
        "genetic_testing": {
          "type": ["object", "null"],
          "properties": {
            "required": {
              "type": ["boolean", "null"]
            },
            "description": {
              "type": ["string", "null"],
              "maxLength": 500
            },
            "opt_out_allowed": {
              "type": ["boolean", "null"]
            },
            "future_use": {
              "type": ["boolean", "null"]
            },
            "results_disclosure": {
              "type": ["string", "null"],
              "maxLength": 300
            },
            "provenance": {
              "$ref": "#/definitions/provenance"
            }
          }
        },
        "biobanking": {
          "type": ["object", "null"],
          "properties": {
            "required": {
              "type": ["boolean", "null"]
            },
            "storage_duration": {
              "type": ["string", "null"],
              "maxLength": 100
            },
            "future_research_use": {
              "type": ["boolean", "null"]
            },
            "commercialization_statement": {
              "type": ["string", "null"],
              "maxLength": 300
            },
            "destruction_option": {
              "type": ["boolean", "null"]
            },
            "provenance": {
              "$ref": "#/definitions/provenance"
            }
          }
        },
        "photography_recording": {
          "type": ["object", "null"],
          "properties": {
            "required": {
              "type": ["boolean", "null"]
            },
            "purpose": {
              "type": ["string", "null"],
              "maxLength": 200
            },
            "usage": {
              "type": ["string", "null"],
              "maxLength": 200
            },
            "provenance": {
              "$ref": "#/definitions/provenance"
            }
          }
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "contacts": {
      "type": "object",
      "description": "Contact information for ICF",
      "properties": {
        "study_questions_contact": {
          "type": ["string", "null"],
          "description": "Who to contact for study questions",
          "maxLength": 300
        },
        "rights_questions_contact": {
          "type": ["string", "null"],
          "description": "Who to contact for rights questions",
          "maxLength": 300
        },
        "emergency_contact": {
          "type": ["string", "null"],
          "description": "Emergency contact information",
          "maxLength": 300
        },
        "twenty_four_hour_contact": {
          "type": ["string", "null"],
          "description": "24-hour contact information",
          "maxLength": 300
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "reproductive_requirements": {
      "type": "object",
      "description": "Pregnancy and reproductive requirements",
      "properties": {
        "pregnancy_testing_required": {
          "type": ["boolean", "null"]
        },
        "contraception_requirements": {
          "type": ["string", "null"],
          "description": "Required contraception methods",
          "maxLength": 500
        },
        "contraception_duration": {
          "type": ["string", "null"],
          "description": "How long contraception must be used",
          "maxLength": 200
        },
        "pregnancy_reporting": {
          "type": ["string", "null"],
          "description": "Pregnancy reporting requirements",
          "maxLength": 300
        },
        "breastfeeding_restrictions": {
          "type": ["string", "null"],
          "description": "Restrictions on breastfeeding",
          "maxLength": 300
        },
        "male_requirements": {
          "type": ["string", "null"],
          "description": "Requirements for male participants",
          "maxLength": 300
        },
        "provenance": {
          "$ref": "#/definitions/provenance"
        }
      }
    },
    "extraction_statistics": {
      "type": "object",
      "description": "Extraction metadata - auto-generated",
      "properties": {
        "has_risks": {"type": "boolean"},
        "has_benefits": {"type": "boolean"},
        "has_alternatives": {"type": "boolean"},
        "has_compensation": {"type": "boolean"},
        "has_genetic_consent": {"type": "boolean"},
        "has_biobanking": {"type": "boolean"},
        "risk_count": {"type": ["integer", "null"]},
        "procedure_count": {"type": ["integer", "null"]}
      }
    },
    "provenance": {
      "$ref": "#/definitions/provenance"
    }
  },
  "required": ["id", "instanceType", "name"]
}
